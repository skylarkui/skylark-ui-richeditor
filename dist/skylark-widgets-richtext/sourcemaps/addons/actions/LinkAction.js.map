{"version":3,"sources":["addons/actions/LinkAction.js"],"names":["define","$","addons","Action","i18n","LinkPopover","LinkAction","inherit","name","icon","htmlTag","disableTag","_status","prototype","call","this","active","editor","editable","selection","rangeAtEndOf","node","popover","action","show","hide","_execute","_this","one","linkText","urlEl","focus","select","textEl","link","translate","actions"],"mappings":";;;;;;;AAAAA,QACE,qBACA,eACA,eACA,aACA,iBACA,SAASC,EAAEC,EAAOC,EAAOC,EAAKC,GAG9B,IAAIC,EAAaH,EAAOI,SACtBC,KAAO,OAEPC,KAAO,OAEPC,QAAU,IAEVC,WAAa,MAEbC,QAAU,WAER,OADDT,EAAOU,UAAUD,QAAQE,KAAKC,MACzBA,KAAKC,SAAWD,KAAKE,OAAOC,SAASC,UAAUC,aAAaL,KAAKM,OAC9DN,KAAKO,UACRP,KAAKO,QAAU,IAAIjB,GACjBkB,OAAQR,QAGLA,KAAKO,QAAQE,KAAKT,KAAKM,OAE1BN,KAAKO,QACAP,KAAKO,QAAQG,YADtB,GAMJC,SAAW,WAEyB,IAAUC,EAc5C,OAfIZ,KAAKC,QACPD,KAAKO,QAAQM,IAAI,eAAyBD,EAUvCZ,KATM,WACL,OAAIc,UACFF,EAAML,QAAQQ,MAAMC,QACbJ,EAAML,QAAQQ,MAAM,GAAGE,WAE9BL,EAAML,QAAQW,OAAOF,QACdJ,EAAML,QAAQW,OAAO,GAAGD,aAOhCjB,KAAKE,OAAOC,SAASgB,KAAKnB,KAAKC,OAAOZ,EAAK+B,UAAU,gBAUhE,OAFAjC,EAAOkC,QAAQF,KAAO5B,EAEfA","file":"../../../addons/actions/LinkAction.js","sourcesContent":["define([\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"../../i18n\",\r\n  \"./LinkPopover\"\r\n],function($,addons,Action,i18n,LinkPopover){ \r\n  \r\n\r\n  var LinkAction = Action.inherit({\r\n    name : 'link',\r\n\r\n    icon : 'link',\r\n\r\n    htmlTag : 'a',\r\n\r\n    disableTag : 'pre',\r\n\r\n    _status : function() {\r\n     Action.prototype._status.call(this);\r\n      if (this.active && !this.editor.editable.selection.rangeAtEndOf(this.node)) {\r\n        if (!this.popover) {\r\n          this.popover = new LinkPopover({\r\n            action: this\r\n          });\r\n        }\r\n        return this.popover.show(this.node);\r\n      } else {\r\n        if (this.popover) {\r\n          return this.popover.hide();\r\n        }\r\n      }\r\n    },\r\n\r\n    _execute : function() {\r\n      if (this.active) {\r\n        this.popover.one('popovershow', (function(_this) {\r\n          return function() {\r\n            if (linkText) {\r\n              _this.popover.urlEl.focus();\r\n              return _this.popover.urlEl[0].select();\r\n            } else {\r\n              _this.popover.textEl.focus();\r\n              return _this.popover.textEl[0].select();\r\n            }\r\n          };\r\n        })(this));\r\n\r\n      }\r\n\r\n      return this.editor.editable.link(this.active,i18n.translate('linkText'));\r\n\r\n    }\r\n\r\n   });\r\n\r\n\r\n\r\n  addons.actions.link = LinkAction; \r\n\r\n  return LinkAction;\r\n\r\n});"]}