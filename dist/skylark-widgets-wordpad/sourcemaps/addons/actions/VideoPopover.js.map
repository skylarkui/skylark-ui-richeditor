{"version":3,"sources":["addons/actions/VideoPopover.js"],"names":["define","$","addons","Popover","inherit","offset","top","left","_loadVideo","videoData","callback","this","target","attr","src","data","action","loadVideo","img","render","tpl","_this","_t","el","addClass","append","srcEl","find","widthEl","heightEl","on","e","which","preventDefault","click","editor","active","refresh","show","$video","args","arguments","length","Array","prototype","slice","call","apply","width","height","link","tag","val"],"mappings":";;;;;;;AAAAA,QACE,qBACA,eACA,iBACA,SAASC,EAAEC,EAAOC,GA8ElB,OA7EmBA,EAAQC,SACzBC,QACEC,IAAK,EACLC,MAAO,GAGTC,WAAa,SAASC,EAAWC,GAC/B,IAAID,GAAaE,KAAKC,OAAOC,KAAK,SAAWJ,EAAUK,IAGvD,OAAOb,EAAE,mBAAmBc,KAAK,cAAgBJ,KAAKK,OAAOC,UAAUhB,EAAE,mBAAmBc,KAAK,aAAcN,EACtG,SAASS,OAQpBC,OAAS,WACP,IAAIC,EAwB4CC,EAAhD,OAvBAD,EAAM,4FAAmGT,KAAKW,GAAG,SAAY,wCAA4CX,KAAKW,GAAG,oBAAuB,2GAAqHX,KAAKW,GAAG,aAAgB,6SAAsUX,KAAKW,GAAG,kBAAqB,2BACxrBX,KAAKY,GAAGC,SAAS,iBAAiBC,OAAOL,GACzCT,KAAKe,MAAQf,KAAKY,GAAGI,KAAK,eAC1BhB,KAAKiB,QAAUjB,KAAKY,GAAGI,KAAK,gBAC5BhB,KAAKkB,SAAWlB,KAAKY,GAAGI,KAAK,iBAC7BhB,KAAKY,GAAGI,KAAK,eAAeG,GAAG,UACtB,SAASC,GACd,GAAgB,KAAZA,EAAEC,OAA4B,KAAZD,EAAEC,MAEtB,OADAD,EAAEE,iBACKhC,EAAE,mBAAmBiC,UAKlCvB,KAAKe,MAAMI,GAAG,UACL,SAASC,GACd,GAAgB,KAAZA,EAAEC,OAA4B,KAAZD,EAAEC,MAEtB,OADAD,EAAEE,iBACKhC,EAAE,mBAAmBiC,UAK3BvB,KAAKwB,OAAOL,GAAG,gBAA0BT,EAM7CV,KALM,SAASoB,GACd,GAAIV,EAAMe,OACR,OAAOf,EAAMgB,cAMrBC,KAAO,WACL,IAAIC,EAAoBC,EAAM/B,EAmB9B,OAlBA+B,EAAO,GAAKC,UAAUC,OAASC,MAAMC,UAAUC,MAAMC,KAAKL,UAAW,MACrEtC,EAAQyC,UAAUN,KAAKS,MAAMpC,KAAM6B,GACnCD,EAASE,UAAU,IAAM9B,KAAKC,OAC9BD,KAAKqC,MAAQT,EAAO1B,KAAK,eAAiB0B,EAAOS,QACjDrC,KAAKsC,OAASV,EAAO1B,KAAK,gBAAkB0B,EAAOU,SAC/CV,EAAO1B,KAAK,eACdJ,GACEyC,KAAMX,EAAO1B,KAAK,aAClBsC,IAAKZ,EAAO1B,KAAK,YACjBmC,MAAOrC,KAAKqC,MACZC,OAAQtC,KAAKsC,QAEftC,KAAKG,IAAML,EAAUyC,MAEvBvC,KAAKiB,QAAQwB,IAAIzC,KAAKqC,OACtBrC,KAAKkB,SAASuB,IAAIzC,KAAKsC,QACvBtC,KAAKe,MAAM0B,IAAIzC,KAAKG,KACpBb,EAAE,mBAAmBc,KAAK,YAAawB,GACnB5B,KAAKC","file":"../../../addons/actions/VideoPopover.js","sourcesContent":["define([\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Popover\"\r\n],function($,addons,Popover){ \r\n  var VideoPopover = Popover.inherit({\r\n    offset : {\r\n      top: 6,\r\n      left: -4\r\n    },\r\n\r\n    _loadVideo : function(videoData, callback) {\r\n      if (videoData && this.target.attr('src') === videoData.src) {\r\n        return;\r\n      }\r\n      return $('.insertVideoBtn').data('videowrap') && this.action.loadVideo($('.insertVideoBtn').data('videowrap'), videoData, (function(_this) {\r\n        return function(img) {\r\n          if (!img) {\r\n\r\n          }\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    render : function() {\r\n      var tpl;\r\n      tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field video-embed-code\\\">\\n    <label>\" + (this._t('video')) + \"</label>\\n    <textarea placeholder=\\\"\" + (this._t('videoPlaceholder')) + \"\\\" type=\\\"text\\\" class=\\\"video-link\\\" ></textarea>\\n  </div><br>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('videoSize')) + \"</label>\\n    <input class=\\\"image-size video-size\\\" id=\\\"video-width\\\" type=\\\"text\\\" tabindex=\\\"2\\\" />\\n    <span class=\\\"times\\\">Ã—</span>\\n    <input class=\\\"image-size video-size\\\" id=\\\"video-height\\\" type=\\\"text\\\" tabindex=\\\"3\\\" />\\n  </div>\\n  <div class=\\\"video-upload\\\">\\n    <button class=\\\"btn insertVideoBtn\\\">\" + (this._t('uploadVideoBtn')) + \"</div>\\n  </div>\\n</div>\";\r\n      this.el.addClass('video-popover').append(tpl);\r\n      this.srcEl = this.el.find('.video-link');\r\n      this.widthEl = this.el.find('#video-width');\r\n      this.heightEl = this.el.find('#video-height');\r\n      this.el.find('.video-size').on('keydown', (function(_this) {\r\n        return function(e) {\r\n          if (e.which === 13 || e.which === 27) {\r\n            e.preventDefault();\r\n            return $('.insertVideoBtn').click();\r\n          }\r\n        };\r\n      })(this));\r\n\r\n      this.srcEl.on('keydown', (function(_this) {\r\n        return function(e) {\r\n          if (e.which === 13 || e.which === 27) {\r\n            e.preventDefault();\r\n            return $('.insertVideoBtn').click();\r\n          }\r\n        };\r\n      })(this));\r\n\r\n      return this.editor.on('valuechanged', (function(_this) {\r\n        return function(e) {\r\n          if (_this.active) {\r\n            return _this.refresh();\r\n          }\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    show : function() {\r\n      var $video, $videoWrap, args, videoData;\r\n      args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n      Popover.prototype.show.apply(this, args);\r\n      $video = arguments[0] || this.target;\r\n      this.width = $video.attr('data-width') || $video.width();\r\n      this.height = $video.attr('data-height') || $video.height();\r\n      if ($video.attr('data-link')) {\r\n        videoData = {\r\n          link: $video.attr('data-link'),\r\n          tag: $video.attr('data-tag'),\r\n          width: this.width,\r\n          height: this.height\r\n        };\r\n        this.src = videoData.link;\r\n      }\r\n      this.widthEl.val(this.width);\r\n      this.heightEl.val(this.height);\r\n      this.srcEl.val(this.src);\r\n      $('.insertVideoBtn').data('videowrap', $video);\r\n      return $videoWrap = this.target;\r\n    }\r\n  });\r\n\r\n  return VideoPopover;\r\n});"]}